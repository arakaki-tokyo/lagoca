(()=>{var e={98:e=>{var t,n,s,a,i;e.exports=(n=t=class{static onChange(e,t){this._data.has(e)||this._data.set(e,{value:null,SOs:[]}),this._data.get(e).SOs.push(t)}static set(e,t){if(this._data.has(e)){const n=this._data.get(e);n.value=t,n.SOs.forEach((n=>n.update({key:e,value:t})))}else this._data.set(e,{value:t,SOs:[]})}},s=t,a="_data",i=new Map,a in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,n)},181:(e,t,n)=>{const s=n(98),a=n(135),i={App:{name:"App",option:{keyPath:"key"}},DoneAct:{name:"DoneAct",option:{keyPath:"start"}},Routine:{name:"Routine",option:{keyPath:"id"},index:[{name:"order",keyPath:"order"}]},Diary:{name:"Diary",option:{keyPath:"date"},index:[{name:"isSynced",keyPath:"isSynced"}]},TaskList:{name:"TaskList",option:{keyPath:"id"},index:[{name:"order",keyPath:"order"}]},Task:{name:"Task",option:{keyPath:"id"},index:[{name:"listId",keyPath:["listId","position"]},{name:"parent",keyPath:"parent"}]}};e.exports=new class{constructor(e){var t,n,s;s=2,(n="VERSION")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s;const a=indexedDB.open("logoca",this.VERSION);a.onupgradeneeded=function(t){const n=t.target.result;Object.values(e).forEach((e=>{if(n.objectStoreNames.contains(e.name))return;const t=e.option?n.createObjectStore(e.name,e.option):n.createObjectStore(e.name);e.index&&e.index.forEach((e=>t.createIndex(e.name,e.keyPath)))}))},this.db=new Promise((e=>{a.onsuccess=t=>e(t.target.result)})),Object.values(e).forEach((e=>{this[`get${e.name}`]=t=>this._get(e.name,t),this[`getAll${e.name}`]=t=>this._getAll(e.name,t),this[`getIndexAll${e.name}`]=(t,n)=>this._getIndexAll(e.name,t,n),this[`getAllKV${e.name}`]=t=>this._getAllKV(e.name,t),this[`set${e.name}`]=t=>this._set(e.name,t),this[`update${e.name}`]=(t,n)=>this._update(e.name,t,n),this[`delete${e.name}`]=t=>this._delete(e.name,t)}))}init(){this.getAllApp().then((e=>e.forEach((({key:e,value:t})=>{s.set(e,t),this[e]=t})))).then((()=>{s.onChange(a.doingAct,this),s.onChange(a.settings,this),s.onChange(a.doneActList,this)}))}update({key:e,value:t}){this.setApp({key:e,value:t}),this[e]=t}save(e){this.setApp({key:e,value:this[e]})}_get(e,t){return this.db.then((n=>{const s=n.transaction(e,"readonly").objectStore(e).get(t);return new Promise(((e,t)=>{s.onsuccess=t=>e(t.target.result),s.onerrors=e=>t(e)}))}))}_getAll(e,t){return this.db.then((n=>{const s=n.transaction(e,"readonly").objectStore(e),a=void 0!==t?s.getAll(t):s.getAll();return new Promise(((e,t)=>{a.onsuccess=t=>e(t.target.result),a.onerrors=e=>t(e)}))}))}_getIndexAll(e,t,n){return this.db.then((s=>{const a=s.transaction(e,"readonly").objectStore(e).index(t),i=void 0!==n?a.getAll(n):a.getAll();return new Promise(((e,t)=>{i.onsuccess=t=>e(t.target.result),i.onerrors=e=>t(e)}))}))}_getAllKV(e,t){return this.db.then((n=>{const s=n.transaction(e,"readonly").objectStore(e),a=void 0!==t?s.openCursor(t):s.openCursor();return new Promise(((e,t)=>{const n=[];a.onsuccess=t=>{let s=t.target.result;s?(n.push({key:s.key,value:s.value}),s.continue()):e(n)},a.onerrors=e=>t(e)}))}))}_set(e,t){return console.log(e),console.dir(t),this.db.then((n=>{const s=n.transaction(e,"readwrite").objectStore(e).put(t);return new Promise(((e,t)=>{s.onsuccess=t=>e(t.target.result),s.onerrors=e=>t(e)}))}))}_update(e,t,n){return this.db.then((s=>{const a=s.transaction(e,"readwrite").objectStore(e).openCursor(t);return new Promise(((t,s)=>{a.onsuccess=s=>{const a=s.target.result;a?a.update(n(a.value)).onsuccess=()=>t(void 0):this[`set${e}`](n()).then((()=>t(void 0)))},a.onerrors=e=>s(e)}))}))}_delete(e,t){return this.db.then((n=>{const s=n.transaction(e,"readwrite").objectStore(e).delete(t);return new Promise(((e,t)=>{s.onsuccess=t=>e(t.target.result),s.onerrors=e=>t(e)}))}))}syncDiary(e){return this.db.then((t=>{const n=t.transaction(i.Diary.name,"readwrite").objectStore(i.Diary.name).openCursor(e.date);return new Promise(((t,s)=>{n.onsuccess=n=>{const s=n.target.result;if(!s)return this.setDiary(e);s.value.timestamp>=e.timestamp||(s.update(e).onsuccess=()=>t(void 0))},n.onerrors=e=>s(e)}))}))}}(i)},135:e=>{e.exports={userProfile:"usrProfile",calendars:"calendars",settings:"settings",tmpNewCalendar:"tmpNewCalendar",isAddCalInProgress:"isAddCalInProgress",addedCalendar:"addedCalendar",summaryFromView:"summaryFromView",summaryToView:"summaryToView",descriptionFromView:"descriptionFromView",descriptionToView:"descriptionToView",doingAct:"doingAct",isSignedIn:"isSignedIn",notice:"notice",doneActList:"doneActList",sw:"sw",toBeStartedAct:"toBeStartedAct",listInserted:"listInserted",anotherAct:"anotherAct"}}},t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}(()=>{const e=n(181);new class{constructor(){self.addEventListener("message",this.recieve.bind(this))}recieve(e){e.data?this.showActNotice(e.data):registration.getNotifications().then((e=>e.forEach((e=>e.close()))))}showActNotice(e){const t=new Date(e.start),n=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");self.registration.showNotification(`${e.summary} (${n}:${s} ~)`,{badge:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADIklEQVRYR7WXSciOURTHf1+ykDkkRMiwUDJGmcu0IBsUyVCfLCxMWSEUVuawQBlKilJYoIhMkTkrMylCSSgslP517tf97nfvc5/30Xfq6X3f557hf8859/zvW0d1uQr0M/PDwOYqruqqGAEKfgw4avaLgUXApFr9VQHQE3gIdAmCfQGGAe9rAVEFwGRgLLApCKTfN4HLzQ2gI/AVuAa0ANwmBKor8Lm5Acj/GmAGMNGC3QbOADtqCS7dKiVwMdSIfYHWwNMqDfi/ANzuHSCVJCa9gNnAzthirRkYAMy09HcHugF/gGfAC+CdHc23XrDrwDhgL7AiBFEWQCtgnT25Mn8zEJoTa4H5ZrAU0MBqJGUAzLLAI3ORI+tzgaHAX2BDlRLMAU4FhsdtJ5+A9taE+hRAPVMDfYE4nQJflIEw+ANgPXDRc6bsSM567+ZZrUcFeudqycAQ4JFncAlYAnwMnOid5EjEuYBOs/dqxAm1ANgFrDQDHa8Uyaw2ndgR0wk5Dww3HfnbU6YJe9vuO5iygqfO+BbTUWliMh24YAsiKYERaTVIrAdEKhtNQxwfko5vv99+LE8A0Gsdx4We3oEcANVT/C5ZAJwocH7S1tR4KdEQUg9ImpQzlgFR6hgzGA3cLXCu5pS4ZoupanpqUkqeAwNzGVCNOptSJ6PemGPV874tjAB0TGPSFvhuCz+AdjkAUpaRRJ8/E45FRmJESVGjajOu8XSP0KYaJFYCpUtpk/QHXiYA6LU7YqndS0flVFklKqfKWghAu3JUOx64UQCgzJIa2g0qNbQauxBAPXDINA4Cy8pEKdDxj7W+N7q+x0rQB3jtOSxqsBw2v09E02JG/66QvJJtt3ufAojJxGhVxC/nbmBV6CTFhprjtwBlowqIHlb3KV5A7f5xWQDS03jd5xloiql+KV5wqpr/2yzd7l3yTpC7EYnBxIy+CMQT4I5Hz22Awdawbu5ng0shB0A6/jEKM/gK+A0MijTIPWBrcFlpolYGgIx0QdGfT4FxNF3UlAqs51euc8sCcH50VxAQTUj9NddnSyvFB2POK8CbXGC3/g+a3Y4hi31FMAAAAABJRU5ErkJggg==",icon:"data:image/png;base64,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",renotify:!1,silent:!0,tag:"logoca",data:e.start,actions:[{action:"end",title:"end action"}]})}},new class{constructor(){addEventListener("notificationclick",this.click.bind(this))}click(e){console.dir(e),e.notification.close();const t="end"===e.action?this.endAct.bind(this):this.showPage;e.waitUntil(self.clients.matchAll({type:"window"}).then((e=>e.find((e=>e.url==`${location.origin}/`)))).then((n=>t(n,e))))}showPage(e){return e?e.focus():self.clients.openWindow?self.clients.openWindow(`${location.origin}/`):void 0}async endAct(t,n){if(!t){let t;await e.updateApp("doingAct",(({key:e,value:n})=>(t={...n},{key:e,value:null}))),t.isSynced=!1,t.end=Date.now();const[n,s,a]=this.calcElapsedTime(t.start,t.end),i=`${0==n?"":n+"h"}${s}m`;return await e.updateApp("summaryToView",(({key:e,value:n})=>(t.summary=`${n} (${i})`,{key:e,value:""}))),await e.updateApp("descriptionToView",(({key:e,value:n})=>(t.description=n,{key:e,value:""}))),await e.updateApp("doneActList",(({key:e,value:n})=>(n.push(t),{key:e,value:n})))}t.postMessage(null)}calcElapsedTime(e,t){const n=Math.floor((t-e)/1e3);return[Math.floor(n/3600),Math.floor(n/60)%60,n%60]}},new class{constructor(){var e,t,n;n=[{version:"10",urls:["/index.js"]},{version:"8",urls:["/","/style.css"]},{version:"1",urls:["/favicon.ico","/img/logo.svg","/img/favicon.svg","/img/logo72.png","/img/logo192.png"]}],(t="cacheItems")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,self.addEventListener("install",this.addCache.bind(this)),self.addEventListener("activate",this.removeCache.bind(this)),self.addEventListener("fetch",this.proxy)}addCache(e){e.waitUntil(Promise.all(this.cacheItems.map((e=>caches.open(e.version).then((t=>Promise.all(e.urls.map((async e=>await t.match(e)?Promise.resolve():t.add(e))))))))))}removeCache(e){e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{const t=this.cacheItems.find((t=>t.version===e));return t?caches.open(e).then((async e=>{const n=await e.keys();await Promise.all(n.map((n=>t.urls.find((e=>e===new URL(n.url).pathname))?Promise.resolve():e.delete(n))))})):caches.delete(e)}))))))}proxy(e){e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request))))}}})()})();